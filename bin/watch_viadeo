#!/usr/bin/env ruby
$:.unshift(File.expand_path('../lib', File.dirname(__FILE__)))
require "rubygems"
require 'bundler/setup'
Bundler.require

require 'buzz'

# we will share the same octokit for two "clients"

# see https://github.com/octokit/octokit.rb#using-a-netrc-file
octokit = Octokit::Client.new :netrc => true
octokit.login

viadeo = Buzz::GitHub::OrgEvents.new('viadeo', octokit)
tijn = Buzz::GitHub::UserEvents.new('tijn', octokit)

while true
  (viadeo.events + tijn.events).each do |event|
    puts "* #{EventPrinter.event_to_s(event)}"
  end
  sleep 20
end
